
### Замыкания


Замыкание (closure) представляет функцию, которая запоминает свое лексическое окружение даже в том случае,  
когда она выполняется вне своей области видимости.

Технически замыкание включает три компонента:
- внешняя функция.  
Она определяет свою область видимости.  
В ней определено лексическое окружение - переменные и параметры
- лексическое окружение (переменные и параметры) определенное во внешней функции
- вложенная функция, которая использует переменные и параметры внешней функции

```python
def outer():        # внешняя функция
    n = 5           # лексическое окружение - локальная переменная
 
    def inner():      # локальная функция
        nonlocal n
        n += 1        # операции с лексическим окружением
        print(n)
 
    return inner
 
# Переменная fn представляет собой замыкание, то есть объединяет две вещи: функцию и окружение, в котором функция была создана.
fn = outer()   # fn = inner, так как функция outer возвращает функцию inner

fn()    # 6
fn()    # 7
fn()    # 8
```

#### Применение параметров

```python
# Функция inner запоминает окружение, в котором она была создана, в частности, значение параметра n. 
# Кроме того, сама принимает параметр и возвращает произведение параметров n и m.
def multiply(n):
    def inner(m): return n * m  
    return inner
 
fn = multiply(5)
print(fn(5))        # 25
print(fn(6))        # 30
print(fn(7))        # 35
```